공인 IP : 공인 기관에서 인정하는 IP 주소, 인터넷을 통한 외부망에서 식별되고 통신 가능한 IP

사설 IP : 내부 망에서 사용 및 식별 가능한 IP, IPv4 개수의 한계

### NAT

네트워크 주소 변환

사설 IP 네트워크를 인터넷으로 연결 -> 라우팅 가능한 공인 Ip로 변환

보안 : 내부 IP 주소를 외부에 공개하지 않음.

유연성 : 공인 IP 대역은 영향을 주지 않고 내부 네트워크 구성 변경이 가능. 기존 사용하던 외부에 공개된 공인 IP 주소는 변경되지 않으나 내부 Ip만 변경

비용 : 공인 IP 할당 비용 감소

L3 이상의 장비 또는 방화벽에서 NAT 가능

### Static NAT 1:1 NAT, 정적 NAT

사설망 내부에 외부로 공개되어야 하는 서버가 존재하는 경우, 해당 서버의 IP 주소는 사설 IP 주소이기 때문에 외부에서 먼저 접근하는 것이 불가능하다.

위와 같은 문제를 해결하기 위해서 Static NAT을 사용할 수 있다.

특정 사설 IP 주소와 특정 공인 IP 주소를 1:1로 Mapping하여 NAT Table에 지속적으로 해당 정보를 유지시키는 것이 가능하다.

### Dynamic NAT

공인 IP와 사설 Ip 그룹을 생성하여 동적으로 매핑하는 방식.

NAT Table은 어떤 사설 Ip주소가 어떤 공인 Ip 주소로 변환 되었는지 정보를 갖고 있다.

내부 PC들은 외부로 통신 시 공인 IP 대역 Pool에서 할당 받는다.

### PAT (port address translation)

1:n NAT, 하나의 공인 아이피에 여러개 사설 아이피를 사용하면 식별이 불가능. 그래서 port를 나누어서 식별함.

### Port Forwarding

특저오 포트로 들어온 패킷을 내부 네트워크에 존재하는 특정 단말의 특정 포트에 매핑해주는 기술, 포트 간 매핑을 실현하는 기술이다.

### NAT 이슈

Hairpin NAT
NAT 장비에서 출발지 IP를 NAT 장비 IP로 변경

예를 들어 서브넷에 속한 사설 IP 주소 10.0.0.1인 디바이스의 1000번 포트에서 어떤 어플리케이션 프로세스가 가동중이라고 하자. 이 1000번 포트에 게이트웨이 라우터의 2000번 포트로 포트-포워딩을 해주도록 설정했다고 하자. 그러면 외부 인터넷 망에서 게이트웨이 라우터의 공인 IP 주소:2000번 포트에 연결하면 10.0.0.1:1000번 포트의 어플리케이션 프로세스와 연결할 수 있게된다.

hhtp 80 포트로 요청하면 https 433으로 매핑하는 것도 이에 해당됨.
